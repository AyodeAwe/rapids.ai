<section class="{{ include.background }} padding-top-{{ include.padding-top }} padding-bottom-{{ include.padding-bottom }}">
    <div class="container-padding" x-data="rapids_selector">
        <div class="selector">
            <div class="options">
                <div>
                    <div class="option-label">Arch</div>
                    <template x-for="arch in arches">
                        <div x-on:click="active_arch = arch" x-bind:class="{'active': arch === active_arch}" class="option" x-text="arch"></div>
                    </template>
                </div>
                <div>
                    <div class="option-label">Method</div>
                    <template x-for="method in methods">
                        <div x-on:click="active_method = method" x-bind:class="{'active': method === active_method}" class="option" x-html="() => getMethodHTML(method)">
                        </div>
                    </template>
                </div>
                <div>
                    <div class="option-label">OS</div>
                    <template x-for="version in os_vers">
                        <div x-on:click="active_os_ver = version" x-bind:class="{'active': version === active_os_ver}" class="option" x-html="() => getOSHTML(version)">
                        </div>
                    </template>
                </div>
                <div>
                    <div class="option-label">Release</div>
                    <template x-for="release in releases">
                        <div x-on:click="active_release = release" x-bind:class="{'active': release === active_release}" class="option" x-text="() => getReleaseText(release)">
                        </div>
                    </template>
                </div>
                <div>
                    <div class="option-label">CUDA</div>
                    <template x-for="version in cuda_vers">
                        <div x-on:click="active_cuda_ver = version" x-bind:class="{'active': version === active_cuda_ver}" class="option" x-text="'CUDA ' + version"></div>
                    </template>
                </div>
                <div>
                    <div class="option-label">Python</div>
                    <template x-for="version in python_vers">
                        <div x-on:click="active_python_ver = version" x-bind:class="{'active': version === active_python_ver}" class="option" x-text="'Python ' + version"></div>
                    </template>
                </div>
                <div>
                    <div class="option-label">Container Type</div>
                    <template x-for="type in container_types">
                        <div x-on:click="active_container_type = type" x-bind:class="{'active': type === active_container_type}" class="option" x-text="type"></div>
                    </template>
                    <div class="option">Add devel checkbox</div>
                    <div class="option">Add examples checkbox</div>
                </div>
                <div>
                    <div class="option-label">Packages</div>
                    <template x-for="package in packages">
                        <div x-on:click="active_package = package" x-bind:class="{'active': package === active_package}" class="option" x-text="package"></div>
                    </template>
                </div>
            </div>
            <div class="cmd">
                <div class="cmd-label">Command</div>
                <div class="cmd-box"><div class="highlight"><pre class="highlight"><code><span class="gh" x-ref="cmd" x-text="getCmdText"># Javascript is needed for this tool to run, please make sure it is enabled</span></code></pre></div></div>
            </div>
        </div>
        <div class="selector-buttons">
            <a class="primary-btn" x-on:click="copyToClipboard">COPY COMMAND <i class="fas fa-clipboard"></i></a>
        </div>
    </div>
</section>
<script type="text/javascript">

document.addEventListener('alpine:init', () => {
    Alpine.data('rapids_selector', () => ({
        // default values
        active_python_ver: "3.8",
        active_cuda_ver: "11.5",
        active_os_ver: "Ubuntu 20.04",
        active_method: "Conda",
        active_release: "Stable",
        active_arch: "Workstation",
        active_container_type: "Standard",
        active_package: "All",

        // all possible values
        python_vers: ["3.8", "3.9"],
        cuda_vers: ["11.0", "11.2", "11.4", "11.5"],
        os_vers: ["Ubuntu 18.04", "Ubuntu 20.04", "CentOS 7", "CentOS 8"],
        methods: ["Conda", "Docker", "Source"],
        releases: ["Stable", "Nightly"],
        arches: ["Workstation", "ARM SBSA"],
        container_types: ["Standard", "Full", "Basic", "Cloud HPO"],
        packages: ["All", "Standard", "cuDF", "cuML", "cuGraph", "cuSpatial", "cuXFilter", "CLX"],
        getOSHTML (os_ver) {
            var icon_class = "ubuntu"
            if (os_ver.toLowerCase().includes("centos")) icon_class = "centos";
            return os_ver + "&nbsp;<i class='fab fa-" + icon_class + "'></i>";
        },
        getMethodHTML (method) {
            var icon_class = "box-open fas";
            if (method.toLowerCase().includes("docker")) icon_class = "docker fab";
            if (method.toLowerCase().includes("source")) icon_class = "cogs fas";
            return method + "&nbsp;<i class='fa-" + icon_class + "'></i>";
        },
        getReleaseText (release) {
            var version = "{{ site.data.releases.stable-version }}";
            if (release.toLowerCase().includes("nightly")) version = "{{ site.data.releases.nightly-version }}a";
            return release + " " +"(" + version + ")";
        },
        getCmdText () {
            var str = "";
            str += "You've selected:\n"
            str += "Python Version: " + this.active_python_ver + "\n";
            str += "CUDA Version: " + this.active_cuda_ver + "\n";
            str += "OS Version: " + this.active_os_ver + "\n";
            str += "Method: " + this.active_method + "\n";
            str += "Release: " + this.active_release + "\n";
            str += "Arch: " + this.active_arch + "\n";
            str += "Container Type: " + this.active_container_type + "\n";
            str += "Package: " + this.active_package + "\n";
            return str;
        },
        copyToClipboard() {
            var range = document.createRange();
            range.selectNode(this.$refs.cmd);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand("copy");
            window.getSelection().removeAllRanges();
        },
    }))
})
</script>